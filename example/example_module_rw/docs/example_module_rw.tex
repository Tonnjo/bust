\documentclass{article}
\usepackage[margin=1in]{geometry}
\usepackage{register}
\usepackage{enumitem}
\setlist[description]{leftmargin=\parindent,labelindent=\parindent}
\usepackage{calc}
\usepackage{tabularx}

\usepackage{listings}
\lstdefinelanguage{VHDL}{
   morekeywords=[1]{
     library,use,all,entity,is,port,in,out,end,architecture,of,
     begin,and,others
   },
   morecomment=[l]--
}
 
\lstdefinestyle{vhdl}{
   language     = VHDL,
   basicstyle   = \ttfamily,
}

\title{example{\_}module{\_}rw}
\author{}
\date{}

\begin{document}

\maketitle

\begin{description}[leftmargin=!,labelwidth=\widthof{\bfseries Address width: }]
\item [Address width: ] 32
\item [Data width: ] 32
\item [Base address: ] 0xFFAA0000
\end{description}


An example module that contain exclusively RW registers.

\section{Register List}

\begin{table}[h!]
  \begin{center}
    \label{tab:table1}
    \begin{tabularx}{\linewidth}{|l|X|l|l|l|c|l|}
      \hline
      \textbf{\#} & \textbf{Name} & \textbf{Mode} & \textbf{Address} & \textbf{Type} & \textbf{Length} &
      \textbf{Reset} \\
      \hline
      0 & reg0 & RW & \texttt{0x00000000} & SL & 1 & \texttt{0x0} \\
      \hline
      1 & reg1 & RW & \texttt{0x00000004} & SL & 1 & \texttt{0x1} \\
      \hline
      2 & reg2 & RW & \texttt{0x0000000C} & SLV & 8 & \texttt{0x3} \\
      \hline
      3 & reg3 & RW & \texttt{0x00000014} & DEFAULT & 32 & \texttt{0xFFFFFFFF} \\
      \hline
      4 & reg4 & RW & \texttt{0x0000001C} & FIELDS & 21 & \texttt{0xAD7} \\
      \hline
    \end{tabularx}
  \end{center}
\end{table}

\section{Registers}

\begin{register}{H}{reg0 - RW}{0x00000000}
  \par RW std{\_}logic register that resets to 0x0 \regnewline
  \label{reg0}
  \regfield{unused}{31}{1}{-}
  \regfield{}{1}{0}{0}
\reglabel{Reset}\regnewline
\end{register}

\begin{register}{H}{reg1 - RW}{0x00000004}
  \par RW std{\_}logic register that resets to 0x1 \regnewline
  \label{reg1}
  \regfield{unused}{31}{1}{-}
  \regfield{}{1}{0}{1}
\reglabel{Reset}\regnewline
\end{register}

\begin{register}{H}{reg2 - RW}{0x0000000C}
  \par RW std{\_}logic{\_}vector[7:0] register that resets to 0x3 \regnewline
  \label{reg2}
  \regfield{unused}{24}{8}{-}
  \regfield{}{8}{0}{{0x3}}
\reglabel{Reset}\regnewline
\end{register}

\begin{register}{H}{reg3 - RW}{0x00000014}
  \par Default RW register that resets to 0xFFFFFFFF \regnewline
  \label{reg3}
  \regfield{}{32}{0}{{0xFFFFFFFF}}
\reglabel{Reset}\regnewline
\end{register}

\begin{register}{H}{reg4 - RW}{0x0000001C}
  \par RW register that have multiple fields \regnewline
  \label{reg4}
  \regfield{unused}{11}{21}{-}
  \regfield{field3}{15}{6}{{0x2B}}
  \regfield{field2}{1}{5}{0}
  \regfield{field1}{4}{1}{{0xB}}
  \regfield{field0}{1}{0}{1}
\reglabel{Reset}\regnewline
  \begin{regdesc}\begin{reglist}[field0]
    \item [field0] std{\_}logic that resets to 0x1    \item [field1] std{\_}logic{\_}vector[3:0] that resets to 0xb    \item [field2] std{\_}logic that resets to 0x0    \item [field3] std{\_}logic{\_}vector[14:0] that resets to 0x2b  \end{reglist}\end{regdesc}
\end{register}

\section{Example VHDL Register Access}

\par
All registers are bundled in records based on their mode. E.g. all RW registers are accessed through the record \textit{bustype\_rw\_regs}. Access is also dependent on the type of register. All register of type SL, SLV and DEFAULT are all directly accessed by just specifying the mode record signal. E.g. the RW register \textit{reg0} can be assigned a value like this (assuming AXI-bus):

\begin{lstlisting}[style=vhdl]
axi_rw_regs.reg0 <= (others => '0');
\end{lstlisting}

\par Registers of type FIELD cannot be directly accessed without specification of a certain field. This is because the registers are implemented as a record in VHDL (thus a record of records). E.g. if the RO register \textit{reg1} contains the field \textit{field3} it can be accessed like this (assuming AXI-bus):

\begin{lstlisting}[style=vhdl]
axi_ro_regs.reg1.field3 <= (others => '0');
\end{lstlisting}

\end{document}